# ğŸš€ Vercel + Supabase Deployment Rehberi

## Neden Vercel + Supabase?

âœ… **Ãœcretsiz** (baÅŸlangÄ±Ã§ iÃ§in yeterli)  
âœ… **HÄ±zlÄ± deploy** (GitHub'dan otomatik)  
âœ… **Next.js iÃ§in optimize**  
âœ… **Production-ready PostgreSQL**  
âœ… **SSL/HTTPS otomatik**  

---

## ADIM 1: Supabase Kurulumu

### 1.1. Proje OluÅŸtur

1. [supabase.com](https://supabase.com) â†’ Kaydol/GiriÅŸ yap
2. **"New Project"** tÄ±kla
3. Bilgileri gir:
   - **Name:** lioradg
   - **Database Password:** GÃ¼Ã§lÃ¼ ÅŸifre oluÅŸtur **â†’ KAYDET!**
   - **Region:** Europe (Frankfurt) - TÃ¼rkiye'ye en yakÄ±n
4. **"Create new project"** â†’ 2-3 dakika bekle

### 1.2. Connection String'leri Al

1. Supabase Dashboard â†’ **Settings** â†’ **Database**
2. **Connection string** bÃ¶lÃ¼mÃ¼nde:

**Session mode (DIRECT_URL iÃ§in):**
```
postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-eu-central-1.pooler.supabase.com:5432/postgres
```

**Transaction mode (DATABASE_URL iÃ§in):**
```
postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres?pgbouncer=true
```

**Ã–NEMLÄ°:** `[YOUR-PASSWORD]` kÄ±smÄ±nÄ± proje oluÅŸtururken girdiÄŸin ÅŸifre ile deÄŸiÅŸtir!

---

## ADIM 2: .env.local DosyasÄ±nÄ± GÃ¼ncelle

`.env.local` dosyasÄ±ndaki connection string'leri Supabase'den aldÄ±klarÄ±nla deÄŸiÅŸtir:

```env
# Supabase Database URLs
DATABASE_URL="postgresql://postgres.xxxxxxxxxxxxx:[ÅÄ°FREN]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.xxxxxxxxxxxxx:[ÅÄ°FREN]@aws-0-eu-central-1.pooler.supabase.com:5432/postgres"

# Email (Zaten var)
SMTP_USER=rboguz06@gmail.com
SMTP_PASSWORD=awbmowfyuwwvmfbv

# NextAuth (Production iÃ§in gÃ¼ncelle)
NEXTAUTH_SECRET=super-secret-random-key-change-in-production-327208468
NEXTAUTH_URL=https://lioradg.com.tr

# Google OAuth (Ä°steÄŸe baÄŸlÄ±)
GOOGLE_CLIENT_ID=your-google-client-id-here
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

NODE_ENV=production
```

---

## ADIM 3: Database Migration

### 3.1. Prisma Client'Ä± OluÅŸtur
```bash
npx prisma generate
```

### 3.2. Migration'larÄ± Ã‡alÄ±ÅŸtÄ±r
```bash
npx prisma migrate dev --name init
```

### 3.3. Seed Data YÃ¼kle
```bash
npm run db:seed
```

### 3.4. Kontrol Et
Supabase Dashboard â†’ **Table Editor** â†’ TablolarÄ± gÃ¶r

---

## ADIM 4: GitHub'a Push

### 4.1. .gitignore Kontrol
`.gitignore` dosyasÄ±nda bunlar olmalÄ±:
```
.env
.env.local
.env*.local
node_modules/
.next/
```

### 4.2. Git Push
```bash
git add .
git commit -m "Production hazÄ±rlÄ±ÄŸÄ±: PostgreSQL migration"
git push origin main
```

**EÄŸer GitHub repo'n yoksa:**
```bash
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/[KULLANICI-ADI]/[REPO-ADI].git
git push -u origin main
```

---

## ADIM 5: Vercel Deployment

### 5.1. Vercel'e Kaydol
1. [vercel.com](https://vercel.com) â†’ **Sign Up with GitHub**
2. GitHub hesabÄ±nla giriÅŸ yap

### 5.2. Projeyi Import Et
1. Vercel Dashboard â†’ **"Add New..."** â†’ **"Project"**
2. GitHub repo'nu seÃ§: **lioradg** (veya repo adÄ±n)
3. **"Import"** tÄ±kla

### 5.3. Environment Variables Ekle
**Configure Project** ekranÄ±nda **Environment Variables** bÃ¶lÃ¼mÃ¼ne ekle:

```
DATABASE_URL = postgresql://postgres.xxxxx:[ÅÄ°FREN]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres?pgbouncer=true

DIRECT_URL = postgresql://postgres.xxxxx:[ÅÄ°FREN]@aws-0-eu-central-1.pooler.supabase.com:5432/postgres

SMTP_USER = rboguz06@gmail.com

SMTP_PASSWORD = awbmowfyuwwvmfbv

NEXTAUTH_SECRET = super-secret-random-key-change-in-production-327208468

NEXTAUTH_URL = https://lioradg.vercel.app

GOOGLE_CLIENT_ID = your-google-client-id-here

GOOGLE_CLIENT_SECRET = your-google-client-secret-here

NODE_ENV = production
```

**Ã–NEMLÄ°:** Her satÄ±r ayrÄ± variable olarak ekle!

### 5.4. Deploy Et
1. **"Deploy"** butonuna tÄ±kla
2. 2-3 dakika bekle
3. **"Visit"** ile siteyi aÃ§: `https://lioradg.vercel.app`

---



- SaÄŸ Ã¼stten **â€œSign Upâ€** (KayÄ±t Ol) tÄ±kla.
- E-posta adresinle veya **â€œContinue with Googleâ€** ile kayÄ±t ol.

### 2. E-postayÄ± doÄŸrula (istersen)
- KayÄ±ttan sonra gelen doÄŸrulama mailine tÄ±kla (gerekebilir).

### 3. Dashboardâ€™a gir
- Sol menÃ¼den **â€œAPI Keysâ€** (veya **â€œAPI Keysâ€** / **â€œKeysâ€**) seÃ§eneÄŸine tÄ±kla.

### 4. Yeni API key oluÅŸtur
- **â€œCreate API Keyâ€** (veya **â€œAdd API Keyâ€**) butonuna tÄ±kla.
- **Name** kÄ±smÄ±na Ã¶rneÄŸin `lioradg` veya `vercel` yaz (sadece senin iÃ§in not).
- **Permission** olarak **â€œSending accessâ€** (veya **â€œFull accessâ€**) seÃ§ili olsun.
- **â€œAddâ€** / **â€œCreateâ€** butonuna tÄ±kla.
- AÃ§Ä±lan ekranda **uzun bir key** gÃ¶rÃ¼necek (Ã¶rn. `re_123abc...`).  
  âš ï¸ **Bu key sadece bir kez gÃ¶sterilir.** Hemen kopyala; sayfayÄ± kapatÄ±rsan bir daha gÃ¶remezsin. Not defterine yapÄ±ÅŸtÄ±r veya gÃ¼venli bir yere kaydet.

### 5. Keyâ€™i Vercelâ€™e ekle
- **Vercel**â€™e git: [vercel.com](https://vercel.com) â†’ GiriÅŸ yap.
- Projeni seÃ§ (Ã¶rn. **lioradg**).
- Ãœstten **â€œSettingsâ€** â†’ sol menÃ¼den **â€œEnvironment Variablesâ€** tÄ±kla.
- **â€œAdd Newâ€** (veya **â€œAddâ€**) tÄ±kla.
- **Value:** Az Ã¶nce kopyaladÄ±ÄŸÄ±n keyâ€™i yapÄ±ÅŸtÄ±r (baÅŸÄ±nda/sonunda boÅŸluk kalmasÄ±n).
- **Environment:** **Production** (ve istersen Preview / Development da iÅŸaretle).
- **â€œSaveâ€** tÄ±kla.

### 6. (Ä°steÄŸe baÄŸlÄ±) GÃ¶nderen adresi â€“ MAIL_FROM
- Ä°stersen Vercelâ€™de ek bir deÄŸiÅŸken ekle:
  - **Name:** `MAIL_FROM`
  (Domain doÄŸruladÄ±ktan sonra bunu `noreply@lioradg.com.tr` gibi yapabilirsin.)

### 7. Deployâ€™u yenile
- Vercelâ€™de **Deployments** sekmesine git.
- En son deploymentâ€™Ä±n saÄŸÄ±ndaki **Ã¼Ã§ nokta (â‹¯)** â†’ **â€œRedeployâ€** tÄ±kla.
- â€œRedeployâ€ onayÄ± ver. BirkaÃ§ dakika sonra yeni ayarlar geÃ§erli olur.

### 8. Test et
- Sitede **yeni bir e-posta** ile kayÄ±t ol (daha Ã¶nce hiÃ§ kullanmadÄ±ÄŸÄ±n bir adres).
- BirkaÃ§ dakika iÃ§inde o adrese **hoÅŸ geldin** maili gelmeli.


---

## ADIM 6: Custom Domain (lioradg.com.tr)

### 6.1. Vercel'de Domain Ekle
1. Vercel Dashboard â†’ Project â†’ **Settings** â†’ **Domains**
2. **"Add Domain"** â†’ `lioradg.com.tr` yaz
3. DNS kayÄ±tlarÄ±nÄ± gÃ¶sterecek

### 6.2. Domain SaÄŸlayÄ±cÄ±nda DNS AyarlarÄ±
Domain saÄŸlayÄ±cÄ±n (Natro, GoDaddy vb.) paneline git:

**A Record:**
```
Type: A
Name: @
Value: 76.76.21.21
```

**CNAME Record:**
```
Type: CNAME
Name: www
Value: cname.vercel-dns.com
```

### 6.3. SSL Bekle
- DNS deÄŸiÅŸikliÄŸi 5-60 dakika sÃ¼rer
- Vercel otomatik SSL sertifikasÄ± ekler
- HazÄ±r olunca `https://lioradg.com.tr` Ã§alÄ±ÅŸÄ±r

### 6.4. NEXTAUTH_URL GÃ¼ncelle
Vercel Dashboard â†’ **Settings** â†’ **Environment Variables**:
```
NEXTAUTH_URL = https://lioradg.com.tr
```
**"Redeploy"** tÄ±kla

---

## ADIM 7: Database Migration (Production)

Vercel'de deploy ettikten sonra, production database'e migration yap:

### 7.1. Vercel CLI Kur
```bash
npm i -g vercel
```

### 7.2. Login
```bash
vercel login
```

### 7.3. Production Migration
```bash
vercel env pull .env.production
npx prisma migrate deploy
```

---

## âœ… TamamlandÄ±!

Site artÄ±k canlÄ±: **https://lioradg.com.tr**

### Test Et:
- âœ… Ana sayfa yÃ¼kleniyor mu?
- âœ… ÃœrÃ¼nler gÃ¶rÃ¼nÃ¼yor mu?
- âœ… KullanÄ±cÄ± kaydÄ± Ã§alÄ±ÅŸÄ±yor mu?
- âœ… Admin paneli eriÅŸilebilir mi?
- âœ… Email gÃ¶nderimi Ã§alÄ±ÅŸÄ±yor mu?

---

## ğŸ”§ GÃ¼ncellemeler (Otomatik Deploy)

ArtÄ±k her `git push` yaptÄ±ÄŸÄ±nda Vercel otomatik deploy eder:

```bash
git add .
git commit -m "Yeni Ã¶zellik eklendi"
git push
```

Vercel otomatik:
1. Kodu Ã§eker
2. Build eder
3. Deploy eder
4. Production'a alÄ±r (2-3 dakika)

---

## ğŸ“Š Monitoring

### Vercel Dashboard
- **Analytics:** ZiyaretÃ§i istatistikleri
- **Logs:** Hata loglarÄ±
- **Deployments:** TÃ¼m deploy geÃ§miÅŸi

### Supabase Dashboard
- **Table Editor:** Database iÃ§eriÄŸi
- **SQL Editor:** Sorgular
- **Logs:** Database loglarÄ±

---

## ğŸš¨ Sorun Giderme

### Build HatasÄ±
```bash
# Local'de test et
npm run build
# Hata varsa dÃ¼zelt, sonra push et
```

### Database Connection Error
- Environment variables doÄŸru mu?
- Supabase ÅŸifresi doÄŸru mu?
- `DATABASE_URL` ve `DIRECT_URL` doÄŸru mu?

### 500 Internal Server Error
- Vercel Dashboard â†’ **Logs** kontrol et
- Supabase Dashboard â†’ **Logs** kontrol et

---

## ğŸ’° Maliyet (Ãœcretsiz Limitler)

### Vercel Free Plan
- âœ… 100GB bandwidth/ay
- âœ… SÄ±nÄ±rsÄ±z deploy
- âœ… SSL sertifikasÄ±
- âœ… Custom domain

### Supabase Free Plan
- âœ… 500MB database
- âœ… 2GB bandwidth/ay
- âœ… 50,000 query/ay

**Bu limitler e-ticaret iÃ§in yeterli!** (AylÄ±k ~1000-5000 ziyaretÃ§i)

---

## ğŸ¯ Ã–neriler

1. **NEXTAUTH_SECRET deÄŸiÅŸtir** (daha gÃ¼Ã§lÃ¼):
   ```bash
   openssl rand -base64 32
   ```

2. **Google OAuth aktif et** (opsiyonel):
   - Google Cloud Console'da proje oluÅŸtur
   - OAuth credentials al
   - Vercel'de environment variables ekle

3. **Email limiti artÄ±r**:
   - Gmail gÃ¼nlÃ¼k 500 email sÄ±nÄ±rÄ± var

4. **Backup**:
   - Supabase otomatik backup yapÄ±yor (7 gÃ¼n)
   - Manuel backup: SQL Editor â†’ Export

---

## ğŸ“š Kaynak

- Vercel Docs: https://vercel.com/docs
- Supabase Docs: https://supabase.com/docs
- Prisma Docs: https://www.prisma.io/docs

---

**HazÄ±rsÄ±n! ğŸ‰**
